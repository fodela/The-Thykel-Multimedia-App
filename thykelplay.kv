ScreenManager:
    id: screenmanager
    name: 'sm'
    HomeScreen:
        id: home
        name: 'home'
    ImageScreen:
        id: image
        name: 'image'
    MusicScreen:
        id: music
        name: 'music'
    VideoScreen:
        id: video
        name: 'video'
            
<HomeScreen>:
    FloatLayout: 
        canvas.before:
            
            Rectangle:
                size: self.size
                pos: self.pos
                source: 'images/playbg.jpg'
            Color: 
                rgba: 0,0,0,0
    

        MyToolbar:
            title: 'Thykel-Play'
            left_action_items: [['menu',lambda x : x]]
        #Buttons
        MDFillRoundFlatButton:
            md_bg_color: app.color_primary
            text: "Image Viewer"
            pos_hint: {'top':.4,'center_x':.2 }
            on_release: app.view_image()
        MDFillRoundFlatButton:
            md_bg_color: app.color_primary
            text: "Music Player"
            pos_hint: {'top':.4,'center_x':.5 }
            on_release: app.play_music()
        MDFillRoundFlatButton:
            md_bg_color: app.color_primary
            text: "Video Player"
            pos_hint: {'top':.4,'center_x':.8 }
            on_release: app.play_video()

        # FileChooserListView:
        #     id:chooser
        #     path: '/home/fodela/Downloads/'
        


<VideoScreen>:
    FloatLayout:
        # canvas:
        #     Color:
        #         rgb: 0,0,1
        #     Rectangle:
        #         pos: self.pos
        #         size: self.size
        MyToolbar:
            title: app.media_playing
        VideoPlayer:
            id: vid
            pos_hint: {'top':.98}
            size:1,.8
            volume: 1
            source: app.media_name
            state: 'play'
            attr: 'VideoPlayer.allow_fullscreen'
            allow_stretch: True
            options: {'allow_stretch':True, }
            # image_play: 'images/play'
            # image_pause: 'images/pause'
            # image_stop:
            # image_volume_muted:

<MusicScreen>:
    name: 'music'
    FloatLayout:
        canvas:
            Color:
                rgb: 0,0,0
            Rectangle:
                pos: self.pos
                size: self.size
    # MediaControl:
    BoxLayout:
        pos_hint: {'top':1.1,'center_x':.5 }
        MDLabel:
            text: app.played
            color: app.color_primary
            size_hint: None,None
            padding: (30,0)
        MDSlider:
            id: seeker
            min: 0
            max: app.play_length
            value: 0
            color: app.color_primary
            hint_text_color: app.color_primary
            size_hint: .7,None
            # pos_hint: {'top':.2,'center_x':.5 }
            on_touch_up:if self.collide_point(*args[1].pos):  app.sound.seek(self.value)
        
        MDLabel:
            text: app.left_to_play
            color: app.color_primary
            size_hint: None,None
            # pos_hint: {'top':.2,'center_x':.93}
    MyToolbar:
        title: app.media_playing
        left_action_items: [['arrow-left',lambda x : app.music_go_home()]]
    MDSlider:
        id: vol
        min: 0
        max: 100
        value: 50
        orientation: 'vertical'
        color: app.theme_cls.accent_color
        hint_text_color: app.color_primary
        size_hint: None,.45
        pos_hint: {'center_y':.5,'center_x':.9}
        on_touch_up: if self.collide_point(*args[1].pos): app.sound.volume = self.value/100
        value_track: True
        value_track_color: app.color_primary
    BoxLayout:
        pos_hint: {'top':.25,'center_x':.45 }
        size_hint:None,None
        MusicButton:
            icon: 'skip-backward'
        MusicButton:
            icon: 'stop'
            on_release: app.music_stop()
        MusicButton:
            icon: app.player_state_icon
            on_release: app.music_pause_n_play()
        MusicButton:
            icon: 'skip-forward'

<ImageScreen>:
    name: 'picture'
    FloatLayout:
        canvas:
            Color:
                rgb: 0,0,0
            Rectangle:
                pos: self.pos
                size: self.size
        MyToolbar:
            title: app.media_playing
        Carousel:
            Image:
                source: app.media_name
                pos_hint: {'center_x': .5,'center_y':.5}
                size: self.texture_size
                size_hint: .9,.9
            Image:
                source: '/home/fodela/Downloads/Images/nat1.jpg'
                pos_hint: {'center_x': .5,'center_y':.5}
                size: self.texture_size
                size_hint: .9,.9
            Image:
                source: '/home/fodela/Downloads/Images/nat2.jpg'
                pos_hint: {'center_x': .5,'center_y':.5}
                size: self.texture_size
                size_hint: .9,.9
        MDIconButton:
            icon: 'less-than'
            # pos_hint: {'left':1, }

        MDIconButton:
            icon: 'greater-than'
            pos_hint: {'right':1, }

<MyToolbar@MDToolbar>:
    left_action_items: [['arrow-left', lambda x : app.change_screen('home')]]
    title: ''
    md_bg_color: 0,0,0,1
    specific_text_color: app.color_primary
    pos_hint: {'top':1}
    user_font_size: '40sp'

<MusicButton@MDIconButton>:
    icon: ''
    theme_text_color: "Custom"
    text_color: app.color_primary
